#!/bin/bash
# ç®€å•è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ - æ¨¡æ‹Ÿ Deep Research æµç¨‹

OUTPUT_FILE="${1:-./test_output.txt}"
TIMEOUT="${2:-60}"

echo "ðŸ§ª å¼€å§‹ç®€å•è‡ªåŠ¨åŒ–æµ‹è¯•"
echo "   ä»»åŠ¡: 1+1=?"
echo "   è¶…æ—¶: ${TIMEOUT}ç§’"
echo ""

# æ¨¡æ‹Ÿç ”ç©¶è¿‡ç¨‹ï¼ˆå®žé™…ä¼šç”¨ browser å·¥å…·ï¼‰
echo "â³ æ­¥éª¤ 1: è¾“å…¥é—®é¢˜..."
sleep 2
echo "âœ… å·²è¾“å…¥: 1+1=?"
echo ""

echo "â³ æ­¥éª¤ 2: ç­‰å¾…å›žç­”ç”Ÿæˆ..."
ELAPSED=0
while [ $ELAPSED -lt $TIMEOUT ]; do
    echo "   ç­‰å¾…ä¸­... (${ELAPSED}s)"
    sleep 5
    ELAPSED=$((ELAPSED + 5))
    
    # æ¨¡æ‹Ÿæ£€æµ‹åˆ°å®Œæˆ
    if [ $ELAPSED -ge 10 ]; then
        echo ""
        echo "âœ… æ£€æµ‹åˆ°å®Œæˆï¼"
        break
    fi
done

# ä¿å­˜ç»“æžœ
echo "ðŸ’¾ ä¿å­˜ç»“æžœ..."
cat > "$OUTPUT_FILE" << 'EOF'
# æµ‹è¯•ç»“æžœ

## é—®é¢˜
1+1=?

## å›žç­”
1+1 = 2

è¿™æ˜¯æœ€åŸºæœ¬çš„ç®—æœ¯è¿ç®—ã€‚åœ¨æ•°å­¦ä¸­ï¼š
- 1 ä»£è¡¨ä¸€ä¸ªå•ä½
- åŠ å· (+) è¡¨ç¤ºåˆå¹¶
- ä¸¤ä¸ªå•ä½åˆå¹¶å°±æ˜¯ 2

## æµ‹è¯•ä¿¡æ¯
- æ—¶é—´: $(date)
- çŠ¶æ€: æˆåŠŸ
- è€—æ—¶: çº¦ 10 ç§’
EOF

echo "âœ… ç»“æžœå·²ä¿å­˜åˆ°: $OUTPUT_FILE"
echo ""
echo "ðŸŽ‰ ç®€å•æµ‹è¯•å®Œæˆï¼"
